问题
====

Q1:新上线一个功能如何设计切流方案？

Q2:旧系统拆分出多个新系统时，如何设计切流方案？

新上线一个功能如何设计切流方案？
====

新功能上线的过程中，在我所处的发布环境中会经历这么几个阶段，首先推上预发环境->灰度环境->生产环境。其中灰度环境和生产环境都是**beta发布过程**。

针对beta发布过程且未切流之前考虑的事情
------

既然是**beta发布过程就会存在旧代码和新代码功能运行的现象**。针对这种现象，我们需要在一开始设计新功能点的时候，就应该将新功能对原有系统的影响点评估到位，考虑兼容性，通过切流开关或代码层面设计来做到新功能上线后，在没有切流前做到新老代码共存，但是整个业务语意表象依旧是新功能没上线前的业务语意。

针对beta发布完成后且开始推送白名单做新功能点验证需要考虑的事情
------

需要考虑的切流步骤一般验证如下步骤进行，每一步均在新功能设计之后反复交叉考虑是否想到了此种情况下的兼容性。才可以做到新功能点上线后，不会存在不兼容和切流后部分数据验证出现线上问题的情况。

1）首先验证新功能之前要做的第一件事情，即使用存量用户数据验证新代码功能是否正常。

2）
