1、理解CAP
------

CAP是Consistency、Availability、Partition tolerance三个词语的缩写，分别表示**一致性、可用性、分区容忍性**。

为了方便更好的理解CAP定理，我这里使用电商系统商品管理系统来解释执行流程如下:
* 1、商品服务请求主数据库写入商品信息（添加商品、修改商品、删除商品）
* 2、主数据库向商品服务响应写入成功
* 3、商品服务请求从数据库读取商品信息

2、一致性（C - Consistency）
-------

一致性是指写操作后的读操作可以读取到最新的数据状态，当数据分布在多个节点上，从任意节点读取到的数据都是最新的状态。商品信息的读写要满足一致性就是要满足如下目标：

* 1、商品服务写入主数据库成功，则向从数据库查询新数据也成功。
* 2、商品服务写入主数据库失败，则向从数据库查询新数据也失败。

**如何实现一致性**？

* 1、写入主数据库后要将数据同步到数据库。
* 2、写入主数据库后，在向从数据库同步期间要将从数据库锁定，待同步完成后再释放锁，以免在新数据写入成功后，向从数据库查询到旧数据

**一致性的特点**

* 1、由于存在数据同步的过程，写操作的响应会有一定的延迟。
* 2、为了保证数据一致性会对资源暂时锁定，待数据同步完成释放锁定资源。
* 3、如果请求数据同步失败的节点则会返回错误信息，一定不会返回旧数据。

3、可用性
-----

