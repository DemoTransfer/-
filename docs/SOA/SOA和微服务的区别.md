看在前面
====

> 作者：网易数帆
链接：https://www.zhihu.com/question/37808426/answer/536875376
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

* SOA 和微服务的差别

很多人说微服务是 SOA 的延续，都强调松耦合，只是 SOA 高度依赖服务总线（ESB），而微服务不需要。

提出 MicroService 概念的Martin Fowler 也说过，“我们应该把 SOA 看作微服务的超集”，也就是说微服务是 SOA 的子集。

其实，Martin Fowler 本人虽然说了微服务的很多参考原则，但并没有明确提出微服务架构的最佳实践。我们反过来理解，SOA 和微服务架构这两个概念成型的年代不一样，实践的主体、要解决的问题也是不一样的，同时从结果来看，SOA 并没有那么成功，而微服务架构在当前的互联网业务研发中发挥着巨大的价值。SOA 的探索大概始于 2000 年（概念产生可能更早一些），大家知道当初 ERP、CRM、OA 之类的信息系统都是一套套部署起来的，不同系统往往由不同的供应商分别开发的，技术差别也很大，各个系统孤零零的，企业于是有了应用集成和数据集成的需求，SOA 就出来了，各个系统对外提供粗粒度的服务供外部系统访问，所有的服务都集中在一个 ESB 上，曾经 SOA 和 SOA 治理是信息化领域的热门话题，然而这种集成方式开发代价大、通信效率低，且有单点故障的风险， 实际上在企业中并没有得到大规模应用。

微服务架构则是在互联网相当成熟的时代，互联网业务规模增长快，变更多且频繁，互联网技术团队强烈关注 DevOps 和持续交付这样的研发理念，传统的单体架构无法满足迭代速度、系统扩展性、资源利用率优化等需求，微服务架构就闪亮登场了，通过解耦，解决掉各种难题。亚马逊、Netflix 和 Facebook 等主要的互联网公司，就是微服务架构实践的先驱，他们取得了很好的效果，也产生了一系列的最佳实践。

> Netflix 公司是国外最早基于云进行服务化架构改造的公司，2008 年因为全站瘫痪被迫停业 3 天后，它痛下决心改造，经过将近 10 年的努力，实现了从单架构到微服务全球化的变迁，满足了业务的千倍增长。

容器技术流行之后，国内采用微服务架构的企业越来越多了。现在不仅是互联网公司，很多传统企业，比如德邦快递，都已经采用微服务架构来实现高效研发以提升公司竞争力了。所以说，从某种程度上，我们可以认为，**SOA 和微服务是差异非常大的两种体系，差别不仅仅在于服务通信模式，更在于对扩展性、容错性、DevOps的支持**。

* 微服务为什么可以成功

前面提到容器，容器并不是很新技术，但 SOA 并不喜欢使用容器，而 Docker 和微服务的关系就比较紧密了。微服务的成功，不仅在于架构的先进性能够匹配当前的业务痛点，更在于开源微服务框架之外，容器云等等配套的工具链也已经成熟。“微服务”带一个微字，不同于 SOA 往往是一个完整的子系统，这更复合 UNIX 设计的哲学（每种服务只做一件事情），但这意味着引入太多的复杂性，比如服务调用有问题怎么排查，但容器编排、APM、CI/CD（持续集成/持续交付）、自动化测试等功能的配合，完美解决了各种问题。我们看各家的微服务实践，往往都是 Kubernetes 容器平台、微服务治理框架和 DevOps 系统一起上的。

所以，网易云轻舟微服务的设计，也是着眼于微服务应用生命周期的需求，提供了微服务框架、API网关、容器服务、DevOps、AIOps 和全自动化测试等模块。
